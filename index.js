import"./assets/popus-DdoreGbD.js";import{a as d,S as $,P as R,N as k,A as w,i as v,d as T}from"./assets/vendor-Dj3mOgk7.js";const S={BASE_URL:"https://tasty-treats-backend.p.goit.global/api",ENDPOINTS:{EVENTS:"/events"}};d.defaults.baseURL=S.BASE_URL;const U=(e,t="")=>{console.error(`[${t}] Hata: `,e);const a=document.querySelector(".error-message");return a&&(a.textContent=`Veri yüklenirken hata oluştu: ${e.message}`,a.style.display="block"),null},O={async getEvents(){try{return(await d.get(`${S.BASE_URL}${S.ENDPOINTS.EVENTS}`)).data}catch(e){return U(e,"getEvents")}}},C=document.querySelector(".swiper-wrapper"),B={createSliderCard(e){const{cook:t,topic:a}=e,n=document.createElement("div");n.className="swiper-slide";const r=document.createElement("div");r.className="slider-card";const i=document.createElement("div");i.className="cooker-card",i.style.backgroundImage=`url(${t.imgWebpUrl})`;const s=document.createElement("div");s.className="main-card";const c=document.createElement("div");c.className="card-preview",c.style.backgroundImage=`url(${a.previewWebpUrl})`;const l=document.createElement("p");l.className="card-title",l.textContent=a.name;const h=document.createElement("p");h.className="card-nation",h.textContent=a.area;const f=document.createElement("div");return f.className="card",f.style.backgroundImage=`url(${a.imgWebpUrl})`,s.appendChild(c),s.appendChild(l),s.appendChild(h),r.appendChild(i),r.appendChild(s),r.appendChild(f),n.appendChild(r),n}};function D(e){C.innerHTML="";const t=document.createDocumentFragment();e.forEach(a=>{const n=B.createSliderCard(a);t.appendChild(n)}),C.appendChild(t)}const P={swiperInstance:null,async init(){try{document.querySelector(".section-hero")&&await this.initHeroSlider()}catch(e){console.error("Uygulama başlatılırken bir hata oluştu: ",e)}},async initHeroSlider(){const e=await O.getEvents();e&&(D(e),this.swiperInstance&&this.swiperInstance.destroy(!0,!0),this.swiperInstance=new $(".swiper",{modules:[R,k,w],allowSlideNext:!0,pagination:{el:".slider-pagination",clickable:!0},autoplay:{delay:3500},loop:!0,spaceBetween:16}))},setupEventListeners(){window.addEventListener("resize",()=>{this.swiperInstance&&this.swiperInstance.update()})}};document.addEventListener("DOMContentLoaded",()=>P.init());const L={BASE_URL:"https://tasty-treats-backend.p.goit.global/api",ENDPOINTS:{CATEGORIES:"/categories"}},_=(e,t="")=>{console.error(`[${t}] Hata:`,e);const a=document.querySelector(".error-message");return a&&(a.textContent=`Veri yüklenirken hata oluştu: ${e.message}`,a.style.display="block"),null},x={async getAllCategories(){try{return(await d.get(`${L.BASE_URL}${L.ENDPOINTS.CATEGORIES}`)).data}catch(e){return _(e,"getAllCategories")}}},M={renderCategories(e){const t=document.querySelector(".categories-list");t&&(t.innerHTML="",e.forEach(a=>{const n=document.createElement("li");n.className="category-list-item";const r=document.createElement("button");r.className="category-btn",r.textContent=a.name,r.dataset.id=a.name,n.appendChild(r),t.appendChild(n)}))}},q={async init(){try{const e=await x.getAllCategories();e&&M.renderCategories(e)}catch(e){console.error("Uygulama başlatılırken bir hata oluştu:",e)}}};document.addEventListener("DOMContentLoaded",()=>q.init());const A={BASE_URL:"https://tasty-treats-backend.p.goit.global/api",ENDPOINTS:{POPULAR:"/recipes/popular"}},H=(e,t="")=>{console.error(`[${t}] Hata:`,e);const a=document.querySelector(".error-message");return a&&(a.textContent=`Veri yüklenirken hata oluştu: ${e.message}`,a.style.display="block"),null},F={async getPopularRecipes(){try{return(await d.get(`${A.BASE_URL}${A.ENDPOINTS.POPULAR}`)).data}catch(e){return H(e,"getPopularRecipes")}}},V={displayPopularRecipes(e){const t=document.querySelector(".recipe-list");t&&(t.innerHTML="",e.forEach(a=>{var r;const n=document.createElement("li");n.classList.add("recipe-list-item"),n.dataset.id=a._id,n.dataset.popup="popup-food",n.dataset.recipe_name=a.title,n.innerHTML=`
        <img class="recipe-box-img" src="${a.preview}" alt="${a.title}" />
        <div class="recipe-box">
          <h3 class="recipe-box-title">${a.title}</h3>
          <p class="recipe-box-text">${(r=a.description)==null?void 0:r.slice(0,90)}...</p>

        </div>
      `,t.appendChild(n)}),t.addEventListener("click",a=>{const n=a.target.closest(".recipe-list-item");if(!n)return;const r=n.dataset.recipe_name;console.log("Tıklanan data-recipe_name:",r)}))}},G={async init(){try{const e=await F.getPopularRecipes();e&&V.displayPopularRecipes(e)}catch(e){console.error("Uygulama başlatılırken bir hata oluştu:",e)}}};document.addEventListener("DOMContentLoaded",()=>G.init());const u={BASE_URL:"https://tasty-treats-backend.p.goit.global/api",ENDPOINTS:{RECIPES:"/recipes",POPULAR:"/recipes/popular",CATEGORIES:"/categories",INGREDIENTS:"/ingredients",AREAS:"/areas"}};d.defaults.baseURL=u.BASE_URL;const y=(e,t="")=>{console.error(`[${t}] Hata:, error`);const a=document.querySelector(".error-message");return a&&(a.textContent=`Veri yüklenirken hata oluştu: ${e.message}`,a.style.display="block"),null},I={async getAllTimes(){try{return(await d.get(`${u.BASE_URL}${u.ENDPOINTS.RECIPES}`)).data.results}catch(e){return y(e,"getAllAreas")}},async getAllAreas(){try{return(await d.get(`${u.BASE_URL}${u.ENDPOINTS.AREAS}`)).data}catch(e){return y(e,"getAllAreas")}},async getAllIngredients(){try{return(await d.get(`${u.BASE_URL}${u.ENDPOINTS.INGREDIENTS}`)).data}catch(e){return y(e,"getAllIndredients")}},async searchRecipes(e,t,a){try{const[n,r,i]=t;try{const s={page:1,limit:9};e&&(s.title=e),n&&(s.time=n),r&&(s.area=r),i&&(s.ingredients=i),a&&(s.category=a),console.log(s),d.get(`${u.BASE_URL}${u.ENDPOINTS.RECIPES}`,{params:s}).then(l=>{console.log(l.data)}).catch(l=>{console.error("Hata:",l)})}catch(s){return y(s,"getAllAreas")}}catch(n){return y(n,"searchRecipes")}}},E={createTime(e){const t=document.querySelector("#search-time");for(let a=5;a<=120;a+=5){const n=document.createElement("option");n.value=a,n.textContent=a,t.appendChild(n)}},createAreas(e){const t=document.querySelector("#search-area");e.forEach(a=>{const n=document.createElement("option");n.value=a.name,n.textContent=a.name,t.appendChild(n)})},createIngedients(e){const t=document.querySelector("#search-ingredients");e.forEach(a=>{const n=document.createElement("option");n.value=a._id,n.textContent=a.name,t.appendChild(n)})}},W={async init(){try{const e=await I.getAllAreas(),t=await I.getAllIngredients();await E.createTime(),await E.createAreas(e),await E.createIngedients(t)}catch(e){console.error("Uygulama başlatılırken bir hata oluştu:",e)}}};document.addEventListener("DOMContentLoaded",()=>W.init());function z(){const e=document.getElementById("loader");e&&(e.style.display="block")}function J(){const e=document.getElementById("loader");e&&(e.style.display="none")}const N={BASE_URL:"https://tasty-treats-backend.p.goit.global/api",ENDPOINTS:{RECIPES:"/recipes"}};d.defaults.baseURL=N.BASE_URL;const Y=(e,t="")=>(v.error({title:"Hata",message:`Bir sorun oluştu (${t}): ${e.message}`,position:"topRight",timeout:4e3}),null),j={async getAllRecipes(e=null,t=[null,null,null],a=null,n=1){try{const[r,i,s]=t,c={page:n,limit:9};return e&&(c.title=e),r&&(c.time=r),i&&(c.area=i),s&&(c.ingredient=s),a&&(c.category=a),(await d.get(N.ENDPOINTS.RECIPES,{params:c})).data}catch(r){return Y(r,"getAllRecipes")}}},m={currentState:{page:1,inputValue:null,selectedValues:[null,null,null],category:null},createFoodsCard(e){var a;const t=document.querySelector(".foodsList");if(t){if(t.innerHTML="",!e.results||e.results.length===0){v.warning({title:"Sonuç Yok",message:"Aradığınız kriterlere uygun yemek bulunamadı.",position:"topCenter",timeout:4e3}),this.renderPagination(1,1);return}for(const n of e.results){const r=document.createElement("li");r.className="foodsList-item",r.dataset.id=n._id;const i=this.getStars(n.rating),l=(JSON.parse(localStorage.getItem("favoriteFoods"))||[]).includes(n._id)?"fa-heart":"fa-heart-o";r.innerHTML=`
        <img src="${n.thumb}" alt="${n.preview}" class="foodsList-itemImg">
        <div class="food-content">
          <div class="heartDiv">
            <i class="fa ${l} fa-2x foodsHeart" aria-hidden="true" data-id="${n._id}"></i>
          </div>
          <div class="food-box-content">
            <h3 class="foodContent-title">${n.title}</h3>
            <p class="foodContent-text">${(a=n.description)==null?void 0:a.slice(0,60)}...</p>
            <div class="raiting-foodContainer">
              <div class="raiting-food">
                <span class="raiting-foodPoint">${Math.ceil(n.rating*10)/10}
                  <span class="raiting-foodStars">${i}</span>
                </span>
                <button class="raiting-foodButton" data-id="${n._id}" data-popup="popup-food">See recipe</button>
              </div>
            </div>
          </div>
        </div>
      `,t.appendChild(r)}this.renderPagination(e.totalPages,e.page)}},getStars(e){let t="";const a=Math.floor(e);for(let n=0;n<5;n++)t+=n<a?'<i class="fa fa-star popup-star active" aria-hidden="true"></i>':'<i class="fa fa-star popup-star" aria-hidden="true"></i>';return t},renderPagination(e,t){t=Number(t);const a=document.getElementById("paginationContainer"),n=document.getElementById("firstPage"),r=document.getElementById("prevPage"),i=document.getElementById("nextPage"),s=document.getElementById("lastPage");a.innerHTML="",n.classList.toggle("disabled",t===1),r.classList.toggle("disabled",t===1),i.classList.toggle("disabled",t===e),s.classList.toggle("disabled",t===e),n.onclick=o=>{o.preventDefault(),t!==1&&p.init(1)},r.onclick=o=>{o.preventDefault(),t>1&&p.init(t-1)},i.onclick=o=>{o.preventDefault(),t<e&&p.init(t+1)},s.onclick=o=>{o.preventDefault(),t!==e&&p.init(e)};const c=o=>{const g=document.createElement("a");return g.href="#",g.textContent=o,g.className="pagination-btn",o===t&&g.classList.add("active"),g.addEventListener("click",b=>{b.preventDefault(),p.init(o)}),g},l=()=>{const o=document.createElement("span");return o.className="dots",o.textContent="...",o};a.appendChild(c(1)),t>4&&a.appendChild(l());const h=Math.max(2,t-2),f=Math.min(e-1,t+2);for(let o=h;o<=f;o++)a.appendChild(c(o));t<e-3&&a.appendChild(l()),e>1&&a.appendChild(c(e))},listenSearchForm(){const e=document.querySelector("#search-input-text"),t=document.querySelectorAll("select"),a=()=>{this.currentState.inputValue=e.value.trim();const r=document.querySelector(".category-btn.active");this.currentState.category=r?r.dataset.id:null,this.currentState.selectedValues=Array.from(t).map(i=>i.multiple?Array.from(i.selectedOptions).map(s=>s.value):i.value),this.currentState.page=1,p.init()},n=T(a,300);e.addEventListener("keydown",r=>{r.key==="Enter"&&(r.preventDefault(),n())}),e.addEventListener("keydown",r=>{n()}),t.forEach(r=>{r.addEventListener("change",a)})},clearForm(){const e=document.querySelector(".form-reset");e&&e.addEventListener("click",t=>{t.preventDefault(),document.querySelector("#search-input-text").value="",document.querySelectorAll(".search-form select").forEach(r=>{r.value=""});const a=document.querySelector(".category-btn.active"),n=a?a.dataset.id:null;this.currentState={page:1,inputValue:null,selectedValues:[null,null,null],category:n},p.init()})},setupEventDelegation(){document.addEventListener("click",e=>{const t=e.target;if(t.classList.contains("foodsHeart")){const a=t.dataset.id;let n=JSON.parse(localStorage.getItem("favoriteFoods"))||[];n.includes(a)?(n=n.filter(r=>r!==a),t.classList.replace("fa-heart","fa-heart-o")):(n.push(a),t.classList.replace("fa-heart-o","fa-heart")),localStorage.setItem("favoriteFoods",JSON.stringify(n))}t.classList.contains("category-btn")&&(document.querySelectorAll(".category-btn").forEach(a=>a.classList.remove("active")),t.classList.add("active"),this.currentState.category=t.dataset.id,this.currentState.page=1,p.init()),t.classList.contains("all-categories-btn")&&(document.querySelectorAll(".category-btn").forEach(a=>a.classList.remove("active")),this.currentState.category=null,this.currentState.page=1,p.init())})}},p={async init(e=m.currentState.page){try{z();const t=document.querySelector(".foodsList");t&&(t.innerHTML=""),m.currentState.page=e;const{inputValue:a,selectedValues:n,category:r}=m.currentState,i=await j.getAllRecipes(a,n,r,e);i&&m.createFoodsCard(i)}catch(t){v.error({title:"Yükleme Hatası",message:t.message,position:"topRight",timeout:4e3})}finally{J()}}};document.addEventListener("DOMContentLoaded",()=>{p.init(),m.listenSearchForm(),m.clearForm(),m.setupEventDelegation()});
//# sourceMappingURL=index.js.map
