{"version":3,"file":"favorites.js","sources":["../src/js/favorites.js"],"sourcesContent":["import axios from 'axios';\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\n\r\nconst API_CONFIG = {\r\n  BASE_URL: 'https://tasty-treats-backend.p.goit.global/api',\r\n  ENDPOINTS: {\r\n    RECIPES: '/recipes',\r\n  },\r\n};\r\n\r\naxios.defaults.baseURL = API_CONFIG.BASE_URL;\r\n\r\nconst handleError = (error, context = '') => {\r\n  iziToast.error({\r\n    title: 'Hata',\r\n    message: `Bir sorun oluştu (${context}): ${error.message}`,\r\n    position: 'topRight',\r\n    timeout: 4000,\r\n  });\r\n  return null;\r\n};\r\n\r\nconst ApiService = {\r\n  async getAllFavoriteRecipes(favoriteIds = []) {\r\n    try {\r\n      const recipePromises = favoriteIds.map(id =>\r\n        axios.get(`${API_CONFIG.ENDPOINTS.RECIPES}/${id}`)\r\n      );\r\n      const responses = await Promise.all(recipePromises);\r\n      const recipes = responses.map(response => response.data);\r\n      return recipes;\r\n    } catch (error) {\r\n      return handleError(error, 'getAllFavoriteRecipes');\r\n    }\r\n  },\r\n};\r\n\r\nconst UIManager = {\r\n  currentState: {\r\n    page: 1,\r\n    category: null,\r\n  },\r\n\r\n  allCategories: [],\r\n  categoriesLoaded: false,\r\n\r\n  loader: document.getElementById('loader'),\r\n\r\n  showLoader() {\r\n    if (this.loader) {\r\n      this.loader.style.display = 'block';\r\n    }\r\n  },\r\n\r\n  hideLoader() {\r\n    if (this.loader) {\r\n      this.loader.style.display = 'none';\r\n    }\r\n  },\r\n\r\n  createFoodsCard(food) {\r\n    const foodList = document.querySelector('.favorites-food');\r\n    if (!foodList) return;\r\n\r\n    foodList.innerHTML = '';\r\n\r\n    const paginationWrapper = document.querySelector('.pagination');\r\n    if (paginationWrapper) {\r\n      paginationWrapper.style.display = 'block';\r\n    }\r\n\r\n    if (!food.results || food.results.length === 0) {\r\n      if (this.currentState.category) {\r\n        foodList.innerHTML = `<p class=\"favorites-category-empty\">No recipes found in the '${this.currentState.category}' category.</p>`;\r\n      } else {\r\n        this.showFavoritesError();\r\n      }\r\n      if (paginationWrapper) paginationWrapper.style.display = 'none';\r\n      return;\r\n    }\r\n\r\n    for (const item of food.results) {\r\n      const li = document.createElement('li');\r\n      li.className = 'foodsList-item';\r\n      li.dataset.id = item._id;\r\n\r\n      const StarsHTML = this.Getstars(item.rating);\r\n      const heartClass = 'fa-heart';\r\n\r\n      li.innerHTML = `\r\n        <img src=\"${item.thumb}\" alt=\"${item.preview}\" class=\"foodsList-itemImg\">\r\n        <div class=\"food-content\">\r\n          <div class=\"heartDiv\">\r\n            <i class=\"fa ${heartClass} fa-2x foodsHeart\" aria-hidden=\"true\" data-id=\"${item._id}\"></i>\r\n          </div>\r\n          <div class=\"food-box-content\">\r\n            <h3 class=\"foodContent-title\">${item.title}</h3>\r\n            <p class=\"foodContent-text\">${item.description?.slice(0, 60)}...</p>\r\n            <div class=\"raiting-foodContainer\">\r\n              <div class=\"raiting-food\">\r\n                <span class=\"raiting-foodPoint\">${item.rating}\r\n                  <span class=\"raiting-foodStars\">${StarsHTML}</span>\r\n                </span>\r\n                <button class=\"raiting-foodButton\" data-id=\"${item._id}\" data-popup=\"popup-food\">See recipe</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      `;\r\n      foodList.appendChild(li);\r\n    }\r\n\r\n    this.renderPagination(food.totalPages, food.page);\r\n  },\r\n\r\n  Getstars(r) {\r\n    let starsHtml = '';\r\n    const ratingStar = Math.floor(r);\r\n    for (let i = 0; i < 5; i++) {\r\n      starsHtml +=\r\n        i < ratingStar\r\n          ? `<i class=\"fa fa-star popup-star active\" aria-hidden=\"true\"></i>`\r\n          : `<i class=\"fa fa-star popup-star\" aria-hidden=\"true\"></i>`;\r\n    }\r\n    return starsHtml;\r\n  },\r\n\r\n  renderPagination(totalPages, currentPage) {\r\n    currentPage = Number(currentPage);\r\n    const paginationContainer = document.getElementById('paginationContainer');\r\n    const paginationWrapper = document.querySelector('.pagination');\r\n\r\n    if (!paginationContainer || !paginationWrapper) return;\r\n\r\n    if (totalPages <= 1) {\r\n      paginationWrapper.style.display = 'none';\r\n      return;\r\n    }\r\n    paginationWrapper.style.display = 'flex';\r\n\r\n    paginationContainer.innerHTML = '';\r\n    const firstPageBtn = document.getElementById('firstPage');\r\n    const prevPageBtn = document.getElementById('prevPage');\r\n    const nextPageBtn = document.getElementById('nextPage');\r\n    const lastPageBtn = document.getElementById('lastPage');\r\n\r\n    firstPageBtn.classList.toggle('disabled', currentPage === 1);\r\n    prevPageBtn.classList.toggle('disabled', currentPage === 1);\r\n    nextPageBtn.classList.toggle('disabled', currentPage === totalPages);\r\n    lastPageBtn.classList.toggle('disabled', currentPage === totalPages);\r\n\r\n    firstPageBtn.onclick = e => {\r\n      e.preventDefault();\r\n      if (currentPage !== 1) GetFavoritesApp.init(1);\r\n    };\r\n\r\n    prevPageBtn.onclick = e => {\r\n      e.preventDefault();\r\n      if (currentPage > 1) GetFavoritesApp.init(currentPage - 1);\r\n    };\r\n\r\n    nextPageBtn.onclick = e => {\r\n      e.preventDefault();\r\n      if (currentPage < totalPages) GetFavoritesApp.init(currentPage + 1);\r\n    };\r\n\r\n    lastPageBtn.onclick = e => {\r\n      e.preventDefault();\r\n      if (currentPage !== totalPages) GetFavoritesApp.init(totalPages);\r\n    };\r\n\r\n    const createPageLink = number => {\r\n      const a = document.createElement('a');\r\n      a.href = '#';\r\n      a.textContent = number;\r\n      a.className = 'pagination-btn';\r\n      if (number === currentPage) a.classList.add('active');\r\n\r\n      a.addEventListener('click', e => {\r\n        e.preventDefault();\r\n        GetFavoritesApp.init(number);\r\n      });\r\n\r\n      return a;\r\n    };\r\n\r\n    if (totalPages > 1) {\r\n        paginationContainer.appendChild(createPageLink(1));\r\n    }\r\n\r\n    if (currentPage > 3) {\r\n      paginationContainer.appendChild(document.createTextNode('...'));\r\n    }\r\n\r\n    for (let i = currentPage - 1; i <= currentPage + 1; i++) {\r\n      if (i > 1 && i < totalPages) {\r\n        paginationContainer.appendChild(createPageLink(i));\r\n      }\r\n    }\r\n\r\n    if (currentPage < totalPages - 2) {\r\n      paginationContainer.appendChild(document.createTextNode('...'));\r\n    }\r\n\r\n    if (totalPages > 1) {\r\n      paginationContainer.appendChild(createPageLink(totalPages));\r\n    }\r\n  },\r\n\r\n  showFavoritesError() {\r\n    const errorSection = document.querySelector('.favorites-errors');\r\n    const foodList = document.querySelector('.favorites-food');\r\n\r\n    if (errorSection) {\r\n      errorSection.style.display = 'flex';\r\n    }\r\n    const categoryList = document.querySelector('.favorites-list');\r\n    if (categoryList) {\r\n      categoryList.innerHTML = '';\r\n    }\r\n    if (foodList) {\r\n      foodList.innerHTML = '';\r\n    }\r\n  },\r\n\r\n  hideFavoritesError() {\r\n    const errorSection = document.querySelector('.favorites-errors');\r\n    if (errorSection) {\r\n      errorSection.style.display = 'none';\r\n    }\r\n  },\r\n\r\n  handleEmptyFavorites() {\r\n    const paginationWrapper = document.querySelector('.pagination');\r\n    this.showFavoritesError();\r\n\r\n    if (paginationWrapper) paginationWrapper.style.display = 'none';\r\n\r\n    this.categoriesLoaded = false;\r\n    this.allCategories = [];\r\n    GetFavoritesApp.allFavoriteRecipeObjects = [];\r\n    this.currentState.category = null;\r\n    this.currentState.page = 1;\r\n  },\r\n\r\n  renderCategoryButtons() {\r\n    const categoryList = document.querySelector('.favorites-list');\r\n    if (!categoryList) return;\r\n\r\n    categoryList.innerHTML = `<button class=\"favorites-btn ${\r\n      this.currentState.category === null ? 'active' : ''\r\n    }\" data-category=\"all\">All Categories</button>`;\r\n\r\n    this.allCategories.forEach(category => {\r\n      const isActive = this.currentState.category === category;\r\n      const button = document.createElement('button');\r\n      button.className = `favorites-btn ${isActive ? 'active' : ''}`;\r\n      button.textContent = category;\r\n      button.dataset.category = category;\r\n      categoryList.appendChild(button);\r\n    });\r\n\r\n    this.setupCategoryButtons();\r\n  },\r\n\r\n  setupCategoryButtons() {\r\n    const categoryButtons = document.querySelectorAll('.favorites-btn');\r\n    categoryButtons.forEach(btn => {\r\n      btn.addEventListener('click', e => {\r\n        categoryButtons.forEach(b => b.classList.remove('active'));\r\n        e.target.classList.add('active');\r\n\r\n        UIManager.currentState.category =\r\n          e.target.dataset.category === 'all'\r\n            ? null\r\n            : e.target.dataset.category;\r\n\r\n        GetFavoritesApp.init(1);\r\n      });\r\n    });\r\n  },\r\n\r\n  setupEventDelegation() {\r\n    document.addEventListener('click', e => {\r\n      const target = e.target;\r\n\r\n      if (target.classList.contains('foodsHeart')) {\r\n        const foodId = target.dataset.id;\r\n        let favorites = JSON.parse(localStorage.getItem('favoriteFoods')) || [];\r\n\r\n        if (favorites.includes(foodId)) {\r\n          const removedRecipe = GetFavoritesApp.allFavoriteRecipeObjects.find(\r\n            r => r._id === foodId\r\n          );\r\n          const removedCategory = removedRecipe ? removedRecipe.category : null;\r\n\r\n          favorites = favorites.filter(id => id !== foodId);\r\n          localStorage.setItem('favoriteFoods', JSON.stringify(favorites));\r\n\r\n          GetFavoritesApp.allFavoriteRecipeObjects =\r\n            GetFavoritesApp.allFavoriteRecipeObjects.filter(\r\n              r => r._id !== foodId\r\n            );\r\n\r\n          if (favorites.length === 0) {\r\n            this.handleEmptyFavorites();\r\n            return;\r\n          }\r\n\r\n          if (removedCategory) {\r\n            const isCategoryNowEmpty =\r\n              !GetFavoritesApp.allFavoriteRecipeObjects.some(\r\n                r => r.category === removedCategory\r\n              );\r\n\r\n            if (isCategoryNowEmpty) {\r\n              this.allCategories = this.allCategories.filter(\r\n                c => c !== removedCategory\r\n              );\r\n              this.currentState.category = null;\r\n              this.renderCategoryButtons();\r\n              GetFavoritesApp.init(1);\r\n              return;\r\n            }\r\n          }\r\n\r\n          GetFavoritesApp.init(this.currentState.page);\r\n        }\r\n      }\r\n    });\r\n  },\r\n};\r\n\r\nconst GetFavoritesApp = {\r\n  allFavoriteRecipeObjects: [],\r\n\r\n  async init(page = 1) {\r\n    try {\r\n      UIManager.showLoader();\r\n      UIManager.currentState.page = page;\r\n\r\n      const favoriteIds = JSON.parse(localStorage.getItem('favoriteFoods')) || [];\r\n\r\n      if (favoriteIds.length === 0) {\r\n        UIManager.handleEmptyFavorites();\r\n        UIManager.hideLoader();\r\n        return;\r\n      }\r\n\r\n      UIManager.hideFavoritesError();\r\n\r\n      if (!UIManager.categoriesLoaded || GetFavoritesApp.allFavoriteRecipeObjects.length !== favoriteIds.length) {\r\n        const allFavoriteRecipes = await ApiService.getAllFavoriteRecipes(\r\n          favoriteIds\r\n        );\r\n        if (allFavoriteRecipes) {\r\n          this.allFavoriteRecipeObjects = allFavoriteRecipes;\r\n          const categories = [\r\n            ...new Set(allFavoriteRecipes.map(item => item.category)),\r\n          ].sort();\r\n          UIManager.allCategories = categories;\r\n          UIManager.categoriesLoaded = true;\r\n          UIManager.renderCategoryButtons();\r\n        } else {\r\n            UIManager.handleEmptyFavorites();\r\n            UIManager.hideLoader();\r\n            return;\r\n        }\r\n      }\r\n\r\n      const { category } = UIManager.currentState;\r\n      const limit = 9;\r\n\r\n      let recipesToDisplay = this.allFavoriteRecipeObjects;\r\n\r\n      if (category) {\r\n        recipesToDisplay = this.allFavoriteRecipeObjects.filter(\r\n          food => food.category === category\r\n        );\r\n      }\r\n\r\n      const totalPages = Math.ceil(recipesToDisplay.length / limit);\r\n      const currentPage = Math.min(page, totalPages) || 1;\r\n      UIManager.currentState.page = currentPage;\r\n\r\n      const startIndex = (currentPage - 1) * limit;\r\n      const paginatedResults = recipesToDisplay.slice(\r\n        startIndex,\r\n        startIndex + limit\r\n      );\r\n\r\n      const foodForDisplay = {\r\n        page: currentPage,\r\n        totalPages: totalPages,\r\n        results: paginatedResults,\r\n      };\r\n\r\n      UIManager.createFoodsCard(foodForDisplay);\r\n\r\n      UIManager.hideLoader();\r\n    } catch (error) {\r\n      iziToast.error({\r\n        title: 'Yükleme Hatası',\r\n        message: error.message,\r\n        position: 'topRight',\r\n        timeout: 4000,\r\n      });\r\n      UIManager.hideLoader();\r\n    }\r\n  },\r\n};\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  GetFavoritesApp.init();\r\n  UIManager.setupEventDelegation();\r\n});"],"names":["API_CONFIG","axios","handleError","error","context","iziToast","ApiService","favoriteIds","recipePromises","id","response","UIManager","food","foodList","paginationWrapper","item","li","StarsHTML","heartClass","_a","r","starsHtml","ratingStar","i","totalPages","currentPage","paginationContainer","firstPageBtn","prevPageBtn","nextPageBtn","lastPageBtn","e","GetFavoritesApp","createPageLink","number","a","errorSection","categoryList","category","isActive","button","categoryButtons","btn","b","target","foodId","favorites","removedRecipe","removedCategory","c","page","allFavoriteRecipes","categories","limit","recipesToDisplay","startIndex","paginatedResults","foodForDisplay"],"mappings":"0FAIA,MAAMA,EAAa,CACjB,SAAU,iDACV,UAAW,CACT,QAAS,UACV,CACH,EAEAC,EAAM,SAAS,QAAUD,EAAW,SAEpC,MAAME,EAAc,CAACC,EAAOC,EAAU,MACpCC,EAAS,MAAM,CACb,MAAO,OACP,QAAS,qBAAqBD,CAAO,MAAMD,EAAM,OAAO,GACxD,SAAU,WACV,QAAS,GACb,CAAG,EACM,MAGHG,EAAa,CACjB,MAAM,sBAAsBC,EAAc,GAAI,CAC5C,GAAI,CACF,MAAMC,EAAiBD,EAAY,IAAIE,GACrCR,EAAM,IAAI,GAAGD,EAAW,UAAU,OAAO,IAAIS,CAAE,EAAE,CACzD,EAGM,OAFkB,MAAM,QAAQ,IAAID,CAAc,GACxB,IAAIE,GAAYA,EAAS,IAAI,CAExD,OAAQP,EAAO,CACd,OAAOD,EAAYC,EAAO,uBAAuB,CAClD,CACF,CACH,EAEMQ,EAAY,CAChB,aAAc,CACZ,KAAM,EACN,SAAU,IACX,EAED,cAAe,CAAE,EACjB,iBAAkB,GAElB,OAAQ,SAAS,eAAe,QAAQ,EAExC,YAAa,CACP,KAAK,SACP,KAAK,OAAO,MAAM,QAAU,QAE/B,EAED,YAAa,CACP,KAAK,SACP,KAAK,OAAO,MAAM,QAAU,OAE/B,EAED,gBAAgBC,EAAM,OACpB,MAAMC,EAAW,SAAS,cAAc,iBAAiB,EACzD,GAAI,CAACA,EAAU,OAEfA,EAAS,UAAY,GAErB,MAAMC,EAAoB,SAAS,cAAc,aAAa,EAK9D,GAJIA,IACFA,EAAkB,MAAM,QAAU,SAGhC,CAACF,EAAK,SAAWA,EAAK,QAAQ,SAAW,EAAG,CAC1C,KAAK,aAAa,SACpBC,EAAS,UAAY,gEAAgE,KAAK,aAAa,QAAQ,kBAE/G,KAAK,mBAAkB,EAErBC,IAAmBA,EAAkB,MAAM,QAAU,QACzD,MACD,CAED,UAAWC,KAAQH,EAAK,QAAS,CAC/B,MAAMI,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,UAAY,iBACfA,EAAG,QAAQ,GAAKD,EAAK,IAErB,MAAME,EAAY,KAAK,SAASF,EAAK,MAAM,EACrCG,EAAa,WAEnBF,EAAG,UAAY;AAAA,oBACDD,EAAK,KAAK,UAAUA,EAAK,OAAO;AAAA;AAAA;AAAA,2BAGzBG,CAAU,kDAAkDH,EAAK,GAAG;AAAA;AAAA;AAAA,4CAGnDA,EAAK,KAAK;AAAA,2CACZI,EAAAJ,EAAK,cAAL,YAAAI,EAAkB,MAAM,EAAG,GAAG;AAAA;AAAA;AAAA,kDAGtBJ,EAAK,MAAM;AAAA,oDACTE,CAAS;AAAA;AAAA,8DAECF,EAAK,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA,QAMhEF,EAAS,YAAYG,CAAE,CACxB,CAED,KAAK,iBAAiBJ,EAAK,WAAYA,EAAK,IAAI,CACjD,EAED,SAASQ,EAAG,CACV,IAAIC,EAAY,GAChB,MAAMC,EAAa,KAAK,MAAMF,CAAC,EAC/B,QAASG,EAAI,EAAGA,EAAI,EAAGA,IACrBF,GACEE,EAAID,EACA,kEACA,2DAER,OAAOD,CACR,EAED,iBAAiBG,EAAYC,EAAa,CACxCA,EAAc,OAAOA,CAAW,EAChC,MAAMC,EAAsB,SAAS,eAAe,qBAAqB,EACnEZ,EAAoB,SAAS,cAAc,aAAa,EAE9D,GAAI,CAACY,GAAuB,CAACZ,EAAmB,OAEhD,GAAIU,GAAc,EAAG,CACnBV,EAAkB,MAAM,QAAU,OAClC,MACD,CACDA,EAAkB,MAAM,QAAU,OAElCY,EAAoB,UAAY,GAChC,MAAMC,EAAe,SAAS,eAAe,WAAW,EAClDC,EAAc,SAAS,eAAe,UAAU,EAChDC,EAAc,SAAS,eAAe,UAAU,EAChDC,EAAc,SAAS,eAAe,UAAU,EAEtDH,EAAa,UAAU,OAAO,WAAYF,IAAgB,CAAC,EAC3DG,EAAY,UAAU,OAAO,WAAYH,IAAgB,CAAC,EAC1DI,EAAY,UAAU,OAAO,WAAYJ,IAAgBD,CAAU,EACnEM,EAAY,UAAU,OAAO,WAAYL,IAAgBD,CAAU,EAEnEG,EAAa,QAAUI,GAAK,CAC1BA,EAAE,eAAc,EACZN,IAAgB,GAAGO,EAAgB,KAAK,CAAC,CACnD,EAEIJ,EAAY,QAAUG,GAAK,CACzBA,EAAE,eAAc,EACZN,EAAc,GAAGO,EAAgB,KAAKP,EAAc,CAAC,CAC/D,EAEII,EAAY,QAAUE,GAAK,CACzBA,EAAE,eAAc,EACZN,EAAcD,GAAYQ,EAAgB,KAAKP,EAAc,CAAC,CACxE,EAEIK,EAAY,QAAUC,GAAK,CACzBA,EAAE,eAAc,EACZN,IAAgBD,GAAYQ,EAAgB,KAAKR,CAAU,CACrE,EAEI,MAAMS,EAAiBC,GAAU,CAC/B,MAAMC,EAAI,SAAS,cAAc,GAAG,EACpC,OAAAA,EAAE,KAAO,IACTA,EAAE,YAAcD,EAChBC,EAAE,UAAY,iBACVD,IAAWT,GAAaU,EAAE,UAAU,IAAI,QAAQ,EAEpDA,EAAE,iBAAiB,QAASJ,GAAK,CAC/BA,EAAE,eAAc,EAChBC,EAAgB,KAAKE,CAAM,CACnC,CAAO,EAEMC,CACb,EAEQX,EAAa,GACbE,EAAoB,YAAYO,EAAe,CAAC,CAAC,EAGjDR,EAAc,GAChBC,EAAoB,YAAY,SAAS,eAAe,KAAK,CAAC,EAGhE,QAASH,EAAIE,EAAc,EAAGF,GAAKE,EAAc,EAAGF,IAC9CA,EAAI,GAAKA,EAAIC,GACfE,EAAoB,YAAYO,EAAeV,CAAC,CAAC,EAIjDE,EAAcD,EAAa,GAC7BE,EAAoB,YAAY,SAAS,eAAe,KAAK,CAAC,EAG5DF,EAAa,GACfE,EAAoB,YAAYO,EAAeT,CAAU,CAAC,CAE7D,EAED,oBAAqB,CACnB,MAAMY,EAAe,SAAS,cAAc,mBAAmB,EACzDvB,EAAW,SAAS,cAAc,iBAAiB,EAErDuB,IACFA,EAAa,MAAM,QAAU,QAE/B,MAAMC,EAAe,SAAS,cAAc,iBAAiB,EACzDA,IACFA,EAAa,UAAY,IAEvBxB,IACFA,EAAS,UAAY,GAExB,EAED,oBAAqB,CACnB,MAAMuB,EAAe,SAAS,cAAc,mBAAmB,EAC3DA,IACFA,EAAa,MAAM,QAAU,OAEhC,EAED,sBAAuB,CACrB,MAAMtB,EAAoB,SAAS,cAAc,aAAa,EAC9D,KAAK,mBAAkB,EAEnBA,IAAmBA,EAAkB,MAAM,QAAU,QAEzD,KAAK,iBAAmB,GACxB,KAAK,cAAgB,GACrBkB,EAAgB,yBAA2B,GAC3C,KAAK,aAAa,SAAW,KAC7B,KAAK,aAAa,KAAO,CAC1B,EAED,uBAAwB,CACtB,MAAMK,EAAe,SAAS,cAAc,iBAAiB,EACxDA,IAELA,EAAa,UAAY,gCACvB,KAAK,aAAa,WAAa,KAAO,SAAW,EAClD,gDAED,KAAK,cAAc,QAAQC,GAAY,CACrC,MAAMC,EAAW,KAAK,aAAa,WAAaD,EAC1CE,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,UAAY,iBAAiBD,EAAW,SAAW,EAAE,GAC5DC,EAAO,YAAcF,EACrBE,EAAO,QAAQ,SAAWF,EAC1BD,EAAa,YAAYG,CAAM,CACrC,CAAK,EAED,KAAK,qBAAoB,EAC1B,EAED,sBAAuB,CACrB,MAAMC,EAAkB,SAAS,iBAAiB,gBAAgB,EAClEA,EAAgB,QAAQC,GAAO,CAC7BA,EAAI,iBAAiB,QAASX,GAAK,CACjCU,EAAgB,QAAQE,GAAKA,EAAE,UAAU,OAAO,QAAQ,CAAC,EACzDZ,EAAE,OAAO,UAAU,IAAI,QAAQ,EAE/BpB,EAAU,aAAa,SACrBoB,EAAE,OAAO,QAAQ,WAAa,MAC1B,KACAA,EAAE,OAAO,QAAQ,SAEvBC,EAAgB,KAAK,CAAC,CAC9B,CAAO,CACP,CAAK,CACF,EAED,sBAAuB,CACrB,SAAS,iBAAiB,QAAS,GAAK,CACtC,MAAMY,EAAS,EAAE,OAEjB,GAAIA,EAAO,UAAU,SAAS,YAAY,EAAG,CAC3C,MAAMC,EAASD,EAAO,QAAQ,GAC9B,IAAIE,EAAY,KAAK,MAAM,aAAa,QAAQ,eAAe,CAAC,GAAK,GAErE,GAAIA,EAAU,SAASD,CAAM,EAAG,CAC9B,MAAME,EAAgBf,EAAgB,yBAAyB,KAC7DZ,GAAKA,EAAE,MAAQyB,CAC3B,EACgBG,EAAkBD,EAAgBA,EAAc,SAAW,KAUjE,GARAD,EAAYA,EAAU,OAAOrC,GAAMA,IAAOoC,CAAM,EAChD,aAAa,QAAQ,gBAAiB,KAAK,UAAUC,CAAS,CAAC,EAE/Dd,EAAgB,yBACdA,EAAgB,yBAAyB,OACvCZ,GAAKA,EAAE,MAAQyB,CAC7B,EAEcC,EAAU,SAAW,EAAG,CAC1B,KAAK,qBAAoB,EACzB,MACD,CAED,GAAIE,GAEA,CAAChB,EAAgB,yBAAyB,KACxCZ,GAAKA,EAAE,WAAa4B,CACpC,EAEoC,CACtB,KAAK,cAAgB,KAAK,cAAc,OACtCC,GAAKA,IAAMD,CAC3B,EACc,KAAK,aAAa,SAAW,KAC7B,KAAK,sBAAqB,EAC1BhB,EAAgB,KAAK,CAAC,EACtB,MACD,CAGHA,EAAgB,KAAK,KAAK,aAAa,IAAI,CAC5C,CACF,CACP,CAAK,CACF,CACH,EAEMA,EAAkB,CACtB,yBAA0B,CAAE,EAE5B,MAAM,KAAKkB,EAAO,EAAG,CACnB,GAAI,CACFvC,EAAU,WAAU,EACpBA,EAAU,aAAa,KAAOuC,EAE9B,MAAM3C,EAAc,KAAK,MAAM,aAAa,QAAQ,eAAe,CAAC,GAAK,GAEzE,GAAIA,EAAY,SAAW,EAAG,CAC5BI,EAAU,qBAAoB,EAC9BA,EAAU,WAAU,EACpB,MACD,CAID,GAFAA,EAAU,mBAAkB,EAExB,CAACA,EAAU,kBAAoBqB,EAAgB,yBAAyB,SAAWzB,EAAY,OAAQ,CACzG,MAAM4C,EAAqB,MAAM7C,EAAW,sBAC1CC,CACV,EACQ,GAAI4C,EAAoB,CACtB,KAAK,yBAA2BA,EAChC,MAAMC,EAAa,CACjB,GAAG,IAAI,IAAID,EAAmB,IAAIpC,GAAQA,EAAK,QAAQ,CAAC,CACzD,EAAC,KAAI,EACNJ,EAAU,cAAgByC,EAC1BzC,EAAU,iBAAmB,GAC7BA,EAAU,sBAAqB,CACzC,KAAe,CACHA,EAAU,qBAAoB,EAC9BA,EAAU,WAAU,EACpB,MACH,CACF,CAED,KAAM,CAAE,SAAA2B,CAAQ,EAAK3B,EAAU,aACzB0C,EAAQ,EAEd,IAAIC,EAAmB,KAAK,yBAExBhB,IACFgB,EAAmB,KAAK,yBAAyB,OAC/C1C,GAAQA,EAAK,WAAa0B,CACpC,GAGM,MAAMd,EAAa,KAAK,KAAK8B,EAAiB,OAASD,CAAK,EACtD5B,EAAc,KAAK,IAAIyB,EAAM1B,CAAU,GAAK,EAClDb,EAAU,aAAa,KAAOc,EAE9B,MAAM8B,GAAc9B,EAAc,GAAK4B,EACjCG,EAAmBF,EAAiB,MACxCC,EACAA,EAAaF,CACrB,EAEYI,EAAiB,CACrB,KAAMhC,EACN,WAAYD,EACZ,QAASgC,CACjB,EAEM7C,EAAU,gBAAgB8C,CAAc,EAExC9C,EAAU,WAAU,CACrB,OAAQR,EAAO,CACdE,EAAS,MAAM,CACb,MAAO,iBACP,QAASF,EAAM,QACf,SAAU,WACV,QAAS,GACjB,CAAO,EACDQ,EAAU,WAAU,CACrB,CACF,CACH,EAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAClDqB,EAAgB,KAAI,EACpBrB,EAAU,qBAAoB,CAChC,CAAC"}