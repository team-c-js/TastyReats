{"version":3,"file":"popus-DSb1n97_.js","sources":["../../src/js/header.js","../../src/js/toup.js","../../src/js/popus.js"],"sourcesContent":["\r\nconst burgerMenu = document.querySelector('.mobile-menu');\r\nconst burgerBtn     = document.querySelector('.burger-menu');\r\nconst closeBtn      = document.querySelector('#mobile-close');\r\nburgerBtn.addEventListener('click', (e)=> {\r\n    e.preventDefault();\r\n    burgerMenu.style.display = 'flex';\r\n});\r\ncloseBtn.addEventListener('click', (e)=> {\r\n    e.preventDefault();\r\n    burgerMenu.style.display = 'none';\r\n});\r\n   \r\n\r\n   document.addEventListener('DOMContentLoaded', () => {\r\n    const themeSwitches = document.querySelectorAll('.input-switcher');\r\n\r\n    const savedTheme = localStorage.getItem('theme');\r\n    if (savedTheme) {\r\n        const isDark = savedTheme === 'dark';\r\n        if (isDark) {\r\n            document.body.classList.add('dark-theme');\r\n        } else {\r\n            document.body.classList.remove('dark-theme');\r\n        }\r\n        themeSwitches.forEach(sw => {\r\n            sw.checked = isDark;\r\n        });\r\n    }\r\n\r\n    themeSwitches.forEach(currentSwitch => {\r\n        currentSwitch.addEventListener('change', () => {\r\n            const isChecked = currentSwitch.checked;\r\n            \r\n            if (isChecked) {\r\n                document.body.classList.add('dark-theme');\r\n                localStorage.setItem('theme', 'dark');\r\n            } else {\r\n                document.body.classList.remove('dark-theme');\r\n                localStorage.setItem('theme', 'light');\r\n            }\r\n\r\n            themeSwitches.forEach(otherSwitch => {\r\n                otherSwitch.checked = isChecked;\r\n            });\r\n        });\r\n    });\r\n});\r\n\r\n    window.addEventListener('DOMContentLoaded', () => {\r\n    const savedTheme = localStorage.getItem('theme');\r\n        if (savedTheme === 'dark') {\r\n        document.body.classList.add('dark-theme');\r\n        themeToggle.checked = true;\r\n        }\r\n    });\r\n","const scrollToTopBtn = document.getElementById(\"scrollToTopBtn\");\r\nwindow.addEventListener(\"scroll\", () => {\r\n  if (window.scrollY > 300) {\r\n    scrollToTopBtn.style.display = \"block\";\r\n  } else {\r\n    scrollToTopBtn.style.display = \"none\";\r\n  }\r\n});\r\nscrollToTopBtn.addEventListener(\"click\", () => {\r\n  window.scrollTo({\r\n    top: 0,\r\n    behavior: \"smooth\"\r\n  });\r\n});\r\n","import axios from 'axios';\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\n\r\nconst API_CONFIG = {\r\n  BASE_URL: 'https://tasty-treats-backend.p.goit.global/api',\r\n  ENDPOINTS: {\r\n    POPULAR: '/recipes/popular',\r\n    RECIPE_DETAIL: '/recipes/',\r\n    ORDERS: '/orders/add/',\r\n  },\r\n};\r\n\r\nconst handleError = (error, context = '') => {\r\n  console.error(`[${context}] Hata:`, error);\r\n\r\n  const errorContainer = document.querySelector('.error-message');\r\n  if (errorContainer) {\r\n    errorContainer.textContent = `Veri yüklenirken hata oluştu: ${error.message}`;\r\n    errorContainer.style.display = 'block';\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nconst ApiService = {\r\n  async getFood() {\r\n    try {\r\n      const response = await axios.get(\r\n        `${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.POPULAR}`\r\n      );\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleError(error, 'getPopularRecipes');\r\n    }\r\n  },\r\n\r\n  async getRecipeDetail(recipeId) {\r\n    try {\r\n      const response = await axios.get(\r\n        `${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.RECIPE_DETAIL}${recipeId}`\r\n      );\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleError(error, 'getRecipeDetail');\r\n    }\r\n  },\r\n  \r\n  async createOrder(orderData) {\r\n    try {\r\n      const response = await axios.post(\r\n        `${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.ORDERS}`,\r\n        orderData\r\n      );\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleError(error, 'createOrder');\r\n    }\r\n  },\r\n  \r\n  async submitRating(ratingData) {\r\n    try {\r\n      console.log(ratingData.rating);\r\n      console.log(ratingData.email);\r\n      const response = await axios.patch(\r\n        `${API_CONFIG.BASE_URL}/recipes/${ratingData.recipeId}/rating`,\r\n      {\r\n        rate: ratingData.rating,\r\n        email: ratingData.email,\r\n      },\r\n        \r\n      );\r\n      return response.data;\r\n    } catch (error) {\r\n      return handleError(error, 'submitRating');\r\n    }\r\n  }\r\n};\r\n\r\nconst UIManager = {\r\n  currentRecipeId: null,\r\n  \r\n  async openPopup(popupType, recipeId) {\r\n    this.currentRecipeId = recipeId;\r\n    const popup = document.querySelector('.popup');\r\n    popup.classList.remove('popup-food', 'popup-raiting', 'popup-order');\r\n    popup.classList.add(`${popupType}`);\r\n    popup.style.display = 'block';\r\n    \r\n    this.resetPopupContent();\r\n    \r\n    if(popupType === 'popup-food'){\r\n      await this.fillPopupContent(recipeId);\r\n    }else if(popupType === 'popup-order'){\r\n      await this.fillPopupOrder(recipeId);\r\n      this.setupOrderFormListener();\r\n    }else if(popupType === 'popup-raiting'){\r\n      await this.fillRatingPopup(recipeId);\r\n      this.setupRatingListener();\r\n    }\r\n  },\r\n  \r\n  resetPopupContent() {\r\n    const popup = document.querySelector('.popup-content');\r\n    popup.innerHTML = '';\r\n  },\r\n  \r\n  closePopup() {\r\n    const closeBtn = document.querySelector('.popup-close');\r\n    \r\n    const popup = document.querySelector('.popup');\r\n    function close(){\r\n      const video = document.querySelector('.popup-video');\r\n      popup.style.display = 'none';\r\n      popup.className = 'popup';\r\n      video.innerHTML = '';\r\n    }\r\n    closeBtn.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      close();\r\n    });\r\n    document.addEventListener('keydown', (e) => {\r\n        if (e.key === 'Escape') {\r\n          close();\r\n        }\r\n      });\r\n  },\r\n  \r\n  async fillPopupContent(recipeId) {\r\n    try {\r\n      const recipe = await ApiService.getRecipeDetail(recipeId);\r\n      if (!recipe) return;\r\n        \r\n      const popup = document.querySelector('.popup-content');\r\n      popup.innerHTML = '';\r\n      const videoId = new URL(recipe.youtube).searchParams.get(\"v\");\r\n      const favorites = JSON.parse(localStorage.getItem('favoriteFoods')) || [];\r\n      const isFavorite = favorites.includes(recipeId);\r\n      const btnText = isFavorite ? 'Remove To Favorite' : 'Add to Favorite';\r\n      popup.innerHTML = `\r\n        <h3 class=\"popup-title\">${recipe.title}</h3>\r\n        <div class=\"popup-video\">\r\n          <iframe \r\n            width=\"100%\" \r\n            height=\"250\" \r\n            src=\"https://www.youtube.com/embed/${videoId}\" \r\n            title=\"\" \r\n            frameborder=\"0\" \r\n            allow=\"accelerometer;clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" \r\n            referrerpolicy=\"strict-origin-when-cross-origin\" \r\n            allowfullscreen>\r\n          </iframe>\r\n        </div>\r\n        <div class=\"popup-tags-raiting\">\r\n            <ul class=\"popup-tag-list\">\r\n              ${recipe.tags.length > 0\r\n                  ? recipe.tags.map(tag => `<li class='tag-list-item'># ${tag}</li>`).join('')\r\n                  : ''}\r\n            </ul>\r\n            <div class=\"popup-raiting-food\">\r\n                <span class=\"popup-rainting-counter\">\r\n                    ${Math.ceil(recipe.rating * 10) / 10}\r\n                </span>\r\n                <div class=\"popup-starts\">\r\n                    ${this.getStars(recipe.rating)}\r\n                </div>\r\n                <span class=\"popup-time\">\r\n                    ${recipe.time} min\r\n                </span>\r\n            </div> \r\n        </div>\r\n\r\n        <ul class=\"popup-recipt\">\r\n            ${recipe.ingredients.map(ing => `\r\n                <li class=\"popup-recipt-item\">\r\n                    <b>${ing.name}</b>\r\n                    <span>${ing.measure}</span>\r\n                </li>`\r\n            ).join('')}\r\n        </ul>\r\n        <div class=\"popup-desc\">\r\n            ${recipe.instructions}\r\n        </div>\r\n\r\n        <div class=\"popup-buttons\">\r\n            <button class=\"popup-green-btn\"\r\n            data-favorite=\"${isFavorite ? 'true' : 'false'}\"\r\n            data-id=\"${recipeId}\"\r\n            id=\"addtofavotie\"\r\n            >${btnText}</button>\r\n            <button class=\"popup-outline-green-btn\"\r\n              data-id=\"${recipeId}\"\r\n              data-popup=\"popup-raiting\">\r\n              Give a rating\r\n            </button>\r\n        </div>\r\n      `;\r\n      \r\n    } catch (error) {\r\n      console.error('Popup içeriği yüklenirken hata:', error);\r\n    } \r\n  },\r\n\r\n  async fillPopupOrder(recipeId) {\r\n    try {\r\n      const popup = document.querySelector('.popup-content');\r\n      popup.innerHTML = `\r\n        <h3 class=\"popup-title\">ORDER NOW</h3>\r\n        <form class=\"popup-order-form\">\r\n          <div class=\"form-row\">\r\n            <label for=\"name\">Name</label>\r\n            <input type=\"text\" class=\"popup-input\" id=\"name\" required>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label for=\"phone-number\">Phone number</label>\r\n            <input type=\"tel\" class=\"popup-input\" id=\"phone-number\" required value=\"+380730000000\"\r\n                   placeholder=\"380730000000\">\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label for=\"email\">Email</label>\r\n            <input type=\"email\" class=\"popup-input\" id=\"email\" required>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label for=\"user-comment\">Comment</label>\r\n            <textarea name=\"user_comment\" id=\"user-comment\" class=\"popup-input\" ></textarea>\r\n          </div>\r\n          <button type=\"submit\" class=\"popup-green-btn\">Send</button>\r\n        </form>\r\n      `;\r\n    } catch(error) {\r\n      console.error('Order popup oluşturulurken hata:', error);\r\n    }\r\n  },\r\n  \r\n  async fillRatingPopup(recipeId) {\r\n    try {\r\n      const popup = document.querySelector('.popup-content');\r\n      popup.innerHTML = `\r\n        <h3 class=\"popup-title\">Rating</h3>\r\n        <div class=\"raiting\">\r\n            <span class=\"raiting-counter\">0.0</span>\r\n            <div class=\"raiting-stars\">\r\n                <i class=\"fa fa-star popup-star\" data-value=\"1\"></i>\r\n                <i class=\"fa fa-star popup-star\" data-value=\"2\"></i>\r\n                <i class=\"fa fa-star popup-star\" data-value=\"3\"></i>\r\n                <i class=\"fa fa-star popup-star\" data-value=\"4\"></i>\r\n                <i class=\"fa fa-star popup-star\" data-value=\"5\"></i>\r\n            </div>\r\n        </div>\r\n        <form class=\"popup-order-form\">\r\n          <div class=\"form-row\">\r\n            <label for=\"email\">Email</label>\r\n            <input type=\"email\" class=\"popup-input\" id=\"email\" pattern=\"([A-z0-9_.-]{1,})@([A-z0-9_.-]{1,}).([A-z]{2,8})\" required />\r\n          </div>\r\n          <button type=\"submit\" class=\"popup-green-btn\">Send Rating</button>\r\n        </form>\r\n      `;\r\n    } catch(error) {\r\n      console.error('Rating popup oluşturulurken hata:', error);\r\n    }\r\n  },\r\n  \r\n  setupRatingListener() {\r\n    const stars = document.querySelectorAll('.raiting-stars .popup-star');\r\n    const ratingCounter = document.querySelector('.raiting-counter');\r\n    const ratingForm = document.querySelector('.popup-order-form');\r\n    let currentRating = 0;\r\n\r\n    // Yıldız tıklama ve hover etkileri\r\n    stars.forEach(star => {\r\n      star.addEventListener('click', () => {\r\n        currentRating = parseInt(star.getAttribute('data-value'));\r\n        ratingCounter.textContent = currentRating.toFixed(1);\r\n        this.updateStars(stars, currentRating);\r\n      });\r\n\r\n      star.addEventListener('mouseover', () => {\r\n        const hoverRating = parseInt(star.getAttribute('data-value'));\r\n        this.updateStars(stars, hoverRating);\r\n      });\r\n\r\n      star.addEventListener('mouseout', () => {\r\n        this.updateStars(stars, currentRating);\r\n      });\r\n    });\r\n\r\n    // Form gönderimi\r\n    if (ratingForm) {\r\n      ratingForm.addEventListener('submit', async (e) => {\r\n        e.preventDefault();\r\n        \r\n        const email = ratingForm.querySelector('#email').value.trim();\r\n        \r\n        \r\n        if (!email) {\r\n          alert('Lütfen e-posta adresinizi girin');\r\n          return;\r\n        }\r\n        \r\n        if (currentRating === 0) {\r\n          alert('Lütfen bir puan seçin');\r\n          return;\r\n        }\r\n\r\n        try {\r\n          const ratingData = {\r\n            recipeId: this.currentRecipeId,\r\n            rating: currentRating,\r\n            email: email\r\n          };\r\n          \r\n          const result = await ApiService.submitRating(ratingData);\r\n          if (result) {\r\n            \r\n            const popup = document.querySelector('.popup');\r\n            popup.style.display = 'none';\r\n            iziToast.success({\r\n              title: 'Teşekkürler!',\r\n              message: 'Değerlendirmeniz için teşekkür ederiz!',\r\n              position: 'topRight', \r\n              timeout: 3000,        \r\n            });\r\n\r\n          }\r\n        } catch (error) {\r\n          iziToast.success({\r\n              title: 'Hata!',\r\n              message: 'Bazı Şeyler Yanlış Gitti...',\r\n              position: 'topRight', \r\n              timeout: 3000,        \r\n            });\r\n        }\r\n      });\r\n    }\r\n  },\r\n  \r\n  updateStars(stars, activeCount) {\r\n    stars.forEach(star => {\r\n      const value = parseInt(star.getAttribute('data-value'));\r\n      if (value <= activeCount) {\r\n        star.classList.add('active');\r\n      } else {\r\n        star.classList.remove('active');\r\n      }\r\n    });\r\n  },\r\n  \r\n  setupOrderFormListener() {\r\n    const orderForm = document.querySelector('.popup-order-form');\r\n    if (!orderForm) return;\r\n\r\n    orderForm.addEventListener('submit', async (e) => {\r\n      e.preventDefault();\r\n      const formData = {\r\n        name: orderForm.querySelector('#name').value.trim(),\r\n        phone: orderForm.querySelector('#phone-number').value.trim(),\r\n        email: orderForm.querySelector('#email').value.trim(),\r\n        comment: orderForm.querySelector('#comment').value.trim()\r\n      };\r\n      \r\n      if (!formData.name || !formData.phone || !formData.email) {\r\n        alert('Lütfen zorunlu alanları doldurun');\r\n        return;\r\n      }\r\n      \r\n      if (!/^\\+380\\d{9}$/.test(formData.phone)) {\r\n        alert('Lütfen geçerli bir telefon numarası girin (örn. +380730000000)');\r\n        return;\r\n      }\r\n      \r\n      if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email)) {\r\n        alert('Lütfen geçerli bir e-posta adresi girin');\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const result = await ApiService.createOrder(formData);\r\n        if (result) {\r\n          console.log('Sipariş eklendi');\r\n          const popup = document.querySelector('.popup');\r\n          popup.style.display = 'none';\r\n        }\r\n      } catch (error) {\r\n        console.error('Sipariş gönderilirken hata:', error);\r\n        alert('Sipariş gönderilirken bir hata oluştu. Lütfen tekrar deneyin.');\r\n      }\r\n    });\r\n  },\r\n\r\n  setupPopupListeners() {\r\n    document.body.addEventListener('click', async (event) => {\r\n      const trigger = event.target.closest('[data-popup][data-id]');\r\n      if (!trigger) return;\r\n\r\n      const recipeId = trigger.getAttribute('data-id');\r\n      const popupType = trigger.getAttribute('data-popup');\r\n      await this.openPopup(popupType, recipeId);\r\n    });\r\n  },\r\n  \r\n  getStars(star) {\r\n    let starsHtml = ``;\r\n    const raitingStar = Math.floor(star);\r\n    const TotalStars = 5;\r\n    for (let i = 0; i < TotalStars; i++) {\r\n      if (i < raitingStar) {\r\n        starsHtml += `<i class=\"fa fa-star popup-star active\" aria-hidden=\"true\"></i>`;\r\n      } else {\r\n        starsHtml += `<i class=\"fa fa-star popup-star\" aria-hidden=\"true\"></i>`;\r\n      }\r\n    }\r\n    return starsHtml;\r\n  },\r\n  addFavoriteBtn(){\r\n    document.addEventListener('click', (e)=> {\r\n        const btn = e.target.closest('#addtofavotie');\r\n        if(!btn) return;\r\n        const recipeId = btn.dataset.id;\r\n        const isFavorite = btn.dataset.favorite === 'true';\r\n\r\n        if(isFavorite){\r\n          let favoriteFoods = JSON.parse(localStorage.getItem('favoriteFoods')) || [];\r\n          favoriteFoods = favoriteFoods.filter(id => id !== recipeId);\r\n          localStorage.setItem('favoriteFoods', JSON.stringify(favoriteFoods));\r\n\r\n          const listItem = document.querySelector(`.foodsList-item [data-id=\"${recipeId}\"]`);\r\n          console.log(listItem);\r\n          if (listItem) {\r\n              listItem.classList.remove('fa-heart');\r\n              listItem.classList.add('fa-heart-o');\r\n              btn.textContent = 'Add to Favorite';\r\n          }\r\n          btn.dataset.favorite = 'false';\r\n        }else{\r\n          let favoriteIds = JSON.parse(localStorage.getItem('favoriteFoods')) || [];\r\n\r\n          if (!favoriteIds.includes(recipeId)) {\r\n            favoriteIds.push(recipeId);\r\n            localStorage.setItem('favoriteFoods', JSON.stringify(favoriteIds));\r\n          }\r\n\r\n          const listItem = document.querySelector(`.foodsList-item [data-id=\"${recipeId}\"]`);\r\n          console.log(listItem);\r\n          if (listItem) {\r\n              listItem.classList.remove('fa-heart-o');\r\n              listItem.classList.add('fa-heart');\r\n              btn.textContent = 'Remove To Favorite';\r\n          }\r\n          btn.dataset.favorite = 'true';\r\n        }\r\n    });\r\n  }\r\n};\r\n\r\nconst PopupApp = {\r\n  async init() {\r\n    try {\r\n      UIManager.setupPopupListeners();\r\n      UIManager.closePopup();\r\n      UIManager.addFavoriteBtn();\r\n    } catch (error) {\r\n      console.error('Uygulama başlatılırken bir hata oluştu:', error);\r\n    }\r\n  },\r\n};\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => PopupApp.init());"],"names":["burgerMenu","burgerBtn","closeBtn","e","themeSwitches","savedTheme","isDark","sw","currentSwitch","isChecked","otherSwitch","scrollToTopBtn","API_CONFIG","handleError","error","context","errorContainer","ApiService","axios","recipeId","orderData","ratingData","UIManager","popupType","popup","close","video","recipe","videoId","isFavorite","btnText","tag","ing","stars","ratingCounter","ratingForm","currentRating","star","hoverRating","email","iziToast","activeCount","orderForm","formData","event","trigger","starsHtml","raitingStar","TotalStars","i","btn","favoriteFoods","id","listItem","favoriteIds","PopupApp"],"mappings":"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"}